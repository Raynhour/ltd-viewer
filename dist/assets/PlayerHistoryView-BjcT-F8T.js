var ct=Object.defineProperty;var dt=(e,a,t)=>a in e?ct(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var h=(e,a,t)=>(dt(e,typeof a!="symbol"?a+"":a,t),t);import{u as mt,c as Ue,g as Ye,a as W,d as Ve,r as ft,o as L,b as te,w as q,e as M,f as l,n as ke,t as Y,h as ee,i as z,j as J,F as Q,k as ge,R as Ae,_ as Fe,l as Ge,m as vt,p as gt,q as ce,s as ht,v as yt,x as re,y as _t,z as pt,A as St,B as se,C as ie,D as kt,E as le,G as de,H as xe,I as wt,J as We,K as bt,L as $t,M as Ct,N as Oe,O as Mt,P as ve,Q as xt,S as It,T as Pt,U as Dt,V as $e,W as Ce,X as qe,Y as At,Z as Tt,$ as Vt,a0 as pe,a1 as ye,a2 as Ne,a3 as Wt,a4 as Je,a5 as Ze,a6 as Qe,a7 as Ot,a8 as Te,a9 as Me,aa as Nt,ab as Lt,ac as Et,ad as Rt,ae as zt,af as Bt,ag as jt,ah as Ht,ai as Ut,aj as Yt,ak as Ie,al as Ft,am as Pe,an as Gt,ao as Ee}from"./index-CWFRuG_G.js";import{P as qt,c as Jt,m as Xe,u as Ke,g as et,a as Zt,b as Qt,d as Xt,R as Kt,e as ea,f as ta,h as aa,V as Re,i as na}from"./VAlert-C0tDlb_3.js";import{W as ra,G as sa,a as we,b as ia,U as la,u as oa}from"./units-CKRPfFVj.js";import{M as tt}from"./MastermindIcon-CwemH_3V.js";import{i as ua,p as ca,u as da,r as ze}from"./useTeams-ZrAddYHw.js";import{m as ma,u as fa}from"./scopeId-Dt2FWEqt.js";class va{constructor(a){h(this,"api");this.api=a}async history(a,{pageParam:t=0}){const n={limit:15,offset:t};return{games:await this.api.get(qt.PLAYER.HISTORY(a),{params:n}),prevOffset:t}}}const ga=100,ha=e=>{const a=new va(e);return{history:n=>mt(["history",n],S=>a.history(n.value,S),{getNextPageParam:S=>(console.log(S.prevOffset),S.prevOffset+10>S.articleCount||S.prevOffset+10>ga?!1:S.prevOffset+10),retry:0,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}};var at=(e=>(e.Ranked="Normal",e.Classic="Classic",e))(at||{});class ya{constructor(){h(this,"playerId","");h(this,"playerName","");h(this,"playerSlot",0);h(this,"legion","");h(this,"workers",0);h(this,"value",0);h(this,"cross",!1);h(this,"gameResult","");h(this,"classicElo",0);h(this,"overallElo",0);h(this,"eloChange",0);h(this,"fighters","");h(this,"eco",!1);h(this,"mercenaries","");h(this,"stayedUntilEnd",!0);h(this,"chosenSpell","");h(this,"chosenSpellLocation","");h(this,"partySize",0);h(this,"firstWaveFighters","");h(this,"rolls","");h(this,"legionSpecificElo",0);h(this,"partyMembers",null);h(this,"partyMembersIds",null);h(this,"mvpScore",0);h(this,"mvp");h(this,"netWorthPerWave",[]);h(this,"valuePerWave",[]);h(this,"workersPerWave",[]);h(this,"incomePerWave",[]);h(this,"mercenariesSentPerWave",[]);h(this,"mercenariesReceivedPerWave",[]);h(this,"leaksPerWave",[]);h(this,"buildPerWave",[]);h(this,"leakValue",0);h(this,"leaksCaughtValue",0);h(this,"leftAtSeconds",0);h(this,"kingUpgradesPerWave",[]);h(this,"opponentKingUpgradesPerWave",[]);h(this,"megamind",!1);h(this,"chosenChampionLocation","");h(this,"income");h(this,"netWorth")}}var nt={exports:{}};(function(e,a){(function(t,n){e.exports=n()})(Ue,function(){var t=1e3,n=6e4,S=36e5,v="millisecond",y="second",u="minute",k="hour",c="day",o="week",g="month",I="quarter",f="year",w="date",D="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var s=["th","st","nd","rd"],r=d%100;return"["+d+(s[(r-20)%10]||s[r]||s[0])+"]"}},H=function(d,s,r){var m=String(d);return!m||m.length>=s?d:""+Array(s+1-m.length).join(r)+d},B={s:H,z:function(d){var s=-d.utcOffset(),r=Math.abs(s),m=Math.floor(r/60),i=r%60;return(s<=0?"+":"-")+H(m,2,"0")+":"+H(i,2,"0")},m:function d(s,r){if(s.date()<r.date())return-d(r,s);var m=12*(r.year()-s.year())+(r.month()-s.month()),i=s.clone().add(m,g),_=r-i<0,p=s.clone().add(m+(_?-1:1),g);return+(-(m+(r-i)/(_?i-p:p-i))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:g,y:f,w:o,d:c,D:w,h:k,m:u,s:y,ms:v,Q:I}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},N="en",E={};E[N]=O;var Z="$isDayjsObject",G=function(d){return d instanceof $||!(!d||!d[Z])},X=function d(s,r,m){var i;if(!s)return N;if(typeof s=="string"){var _=s.toLowerCase();E[_]&&(i=_),r&&(E[_]=r,i=_);var p=s.split("-");if(!i&&p.length>1)return d(p[0])}else{var x=s.name;E[x]=s,i=x}return!m&&i&&(N=i),i||!m&&N},P=function(d,s){if(G(d))return d.clone();var r=typeof s=="object"?s:{};return r.date=d,r.args=arguments,new $(r)},C=B;C.l=X,C.i=G,C.w=function(d,s){return P(d,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var $=function(){function d(r){this.$L=X(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[Z]=!0}var s=d.prototype;return s.parse=function(r){this.$d=function(m){var i=m.date,_=m.utc;if(i===null)return new Date(NaN);if(C.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var p=i.match(b);if(p){var x=p[2]-1||0,V=(p[7]||"0").substring(0,3);return _?new Date(Date.UTC(p[1],x,p[3]||1,p[4]||0,p[5]||0,p[6]||0,V)):new Date(p[1],x,p[3]||1,p[4]||0,p[5]||0,p[6]||0,V)}}return new Date(i)}(r),this.init()},s.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},s.$utils=function(){return C},s.isValid=function(){return this.$d.toString()!==D},s.isSame=function(r,m){var i=P(r);return this.startOf(m)<=i&&i<=this.endOf(m)},s.isAfter=function(r,m){return P(r)<this.startOf(m)},s.isBefore=function(r,m){return this.endOf(m)<P(r)},s.$g=function(r,m,i){return C.u(r)?this[m]:this.set(i,r)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(r,m){var i=this,_=!!C.u(m)||m,p=C.p(r),x=function(ne,U){var K=C.w(i.$u?Date.UTC(i.$y,U,ne):new Date(i.$y,U,ne),i);return _?K:K.endOf(c)},V=function(ne,U){return C.w(i.toDate()[ne].apply(i.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(U)),i)},R=this.$W,j=this.$M,F=this.$D,oe="set"+(this.$u?"UTC":"");switch(p){case f:return _?x(1,0):x(31,11);case g:return _?x(1,j):x(0,j+1);case o:var ae=this.$locale().weekStart||0,me=(R<ae?R+7:R)-ae;return x(_?F-me:F+(6-me),j);case c:case w:return V(oe+"Hours",0);case k:return V(oe+"Minutes",1);case u:return V(oe+"Seconds",2);case y:return V(oe+"Milliseconds",3);default:return this.clone()}},s.endOf=function(r){return this.startOf(r,!1)},s.$set=function(r,m){var i,_=C.p(r),p="set"+(this.$u?"UTC":""),x=(i={},i[c]=p+"Date",i[w]=p+"Date",i[g]=p+"Month",i[f]=p+"FullYear",i[k]=p+"Hours",i[u]=p+"Minutes",i[y]=p+"Seconds",i[v]=p+"Milliseconds",i)[_],V=_===c?this.$D+(m-this.$W):m;if(_===g||_===f){var R=this.clone().set(w,1);R.$d[x](V),R.init(),this.$d=R.set(w,Math.min(this.$D,R.daysInMonth())).$d}else x&&this.$d[x](V);return this.init(),this},s.set=function(r,m){return this.clone().$set(r,m)},s.get=function(r){return this[C.p(r)]()},s.add=function(r,m){var i,_=this;r=Number(r);var p=C.p(m),x=function(j){var F=P(_);return C.w(F.date(F.date()+Math.round(j*r)),_)};if(p===g)return this.set(g,this.$M+r);if(p===f)return this.set(f,this.$y+r);if(p===c)return x(1);if(p===o)return x(7);var V=(i={},i[u]=n,i[k]=S,i[y]=t,i)[p]||1,R=this.$d.getTime()+r*V;return C.w(R,this)},s.subtract=function(r,m){return this.add(-1*r,m)},s.format=function(r){var m=this,i=this.$locale();if(!this.isValid())return i.invalidDate||D;var _=r||"YYYY-MM-DDTHH:mm:ssZ",p=C.z(this),x=this.$H,V=this.$m,R=this.$M,j=i.weekdays,F=i.months,oe=i.meridiem,ae=function(U,K,fe,_e){return U&&(U[K]||U(m,_))||fe[K].slice(0,_e)},me=function(U){return C.s(x%12||12,U,"0")},ne=oe||function(U,K,fe){var _e=U<12?"AM":"PM";return fe?_e.toLowerCase():_e};return _.replace(A,function(U,K){return K||function(fe){switch(fe){case"YY":return String(m.$y).slice(-2);case"YYYY":return C.s(m.$y,4,"0");case"M":return R+1;case"MM":return C.s(R+1,2,"0");case"MMM":return ae(i.monthsShort,R,F,3);case"MMMM":return ae(F,R);case"D":return m.$D;case"DD":return C.s(m.$D,2,"0");case"d":return String(m.$W);case"dd":return ae(i.weekdaysMin,m.$W,j,2);case"ddd":return ae(i.weekdaysShort,m.$W,j,3);case"dddd":return j[m.$W];case"H":return String(x);case"HH":return C.s(x,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return ne(x,V,!0);case"A":return ne(x,V,!1);case"m":return String(V);case"mm":return C.s(V,2,"0");case"s":return String(m.$s);case"ss":return C.s(m.$s,2,"0");case"SSS":return C.s(m.$ms,3,"0");case"Z":return p}return null}(U)||p.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(r,m,i){var _,p=this,x=C.p(m),V=P(r),R=(V.utcOffset()-this.utcOffset())*n,j=this-V,F=function(){return C.m(p,V)};switch(x){case f:_=F()/12;break;case g:_=F();break;case I:_=F()/3;break;case o:_=(j-R)/6048e5;break;case c:_=(j-R)/864e5;break;case k:_=j/S;break;case u:_=j/n;break;case y:_=j/t;break;default:_=j}return i?_:C.a(_)},s.daysInMonth=function(){return this.endOf(g).$D},s.$locale=function(){return E[this.$L]},s.locale=function(r,m){if(!r)return this.$L;var i=this.clone(),_=X(r,m,!0);return _&&(i.$L=_),i},s.clone=function(){return C.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},d}(),T=$.prototype;return P.prototype=T,[["$ms",v],["$s",y],["$m",u],["$H",k],["$W",c],["$M",g],["$y",f],["$D",w]].forEach(function(d){T[d[1]]=function(s){return this.$g(s,d[0],d[1])}}),P.extend=function(d,s){return d.$i||(d(s,$,P),d.$i=!0),P},P.locale=X,P.isDayjs=G,P.unix=function(d){return P(1e3*d)},P.en=E[N],P.Ls=E,P.p={},P})})(nt);var _a=nt.exports;const rt=Ye(_a);var st={exports:{}};(function(e,a){(function(t,n){e.exports=n()})(Ue,function(){return function(t,n,S){t=t||{};var v=n.prototype,y={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(c,o,g,I){return v.fromToBase(c,o,g,I)}S.en.relativeTime=y,v.fromToBase=function(c,o,g,I,f){for(var w,D,b,A=g.$locale().relativeTime||y,O=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],H=O.length,B=0;B<H;B+=1){var N=O[B];N.d&&(w=I?S(c).diff(g,N.d,!0):g.diff(c,N.d,!0));var E=(t.rounding||Math.round)(Math.abs(w));if(b=w>0,E<=N.r||!N.r){E<=1&&B>0&&(N=O[B-1]);var Z=A[N.l];f&&(E=f(""+E)),D=typeof Z=="string"?Z.replace("%d",E):Z(E,o,N.l,b);break}}if(o)return D;var G=b?A.future:A.past;return typeof G=="function"?G(D):G.replace("%s",D)},v.to=function(c,o){return u(c,o,this,!0)},v.from=function(c,o){return u(c,o,this)};var k=function(c){return c.$u?S.utc():S()};v.toNow=function(c){return this.to(k(this),c)},v.fromNow=function(c){return this.from(k(this),c)}}})})(st);var pa=st.exports;const Sa=Ye(pa);rt.extend(Sa);function ka(e){const a=rt(e);function t(){return a.fromNow()}return{daysAgo:t}}function wa(e){const a=e%10,t=e%100;return e===1?"MVP":a===1&&t!==11?e+"st":a===2&&t!==12?e+"nd":a===3&&t!==13?e+"rd":e+"th"}function ba(e){return{mvpScores:W(()=>e.playersData.map(t=>t).sort((t,n)=>n.mvpScore-t.mvpScore).map((t,n)=>({mvpScore:t.mvpScore,playerName:t.playerName,positionText:wa(n+1)})))}}const $a={class:"game-card__main-info game-card-item"},Ca={class:"game-card__text game-card-item d-flex"},Ma={class:"game-card__text"},xa={class:"game-card__text"},Ia={class:"game-card-item"},Pa={class:"game-card__text"},Da={class:"game-card__text"},Aa={class:"game-info"},Ta={class:"game-card__text d-flex"},Va={class:"game-card__text"},Wa={class:"game-card__text"},Oa={class:"game-teams d-flex justify-start"},Na={class:"game-team mr-5"},La=["src"],Ea={class:"game-team"},Ra=["src"],za=Ve({__name:"GameCard",props:{game:{},playerName:{}},setup(e){const a=e,t=W(()=>{var w;return((w=a.game.playersData)==null?void 0:w.find(D=>D.playerName.toLocaleLowerCase()===a.playerName.toLocaleLowerCase()))||new ya}),n=W(()=>{const f=ua(t.value);return{title:ca(f),isWin:f}}),S=ka(a.game.date).daysAgo(),v=W(()=>({value:t.value.value,workers:t.value.workers,income:t.value.incomePerWave[t.value.incomePerWave.length-1]})),{mvpScores:y}=ba(a.game),u=W(()=>{var f;return(f=y.value.find(w=>w.playerName.toLocaleLowerCase()==a.playerName.toLocaleLowerCase()))==null?void 0:f.positionText}),k=W(()=>a.game.playersData),{firstTeam:c,secondTeam:o}=da(k),g=W(()=>a.game.queueType===at.Classic),I=W(()=>t.value.eloChange>0?`+${t.value.eloChange}`:t.value.eloChange.toString());return(f,w)=>{const D=ft("router-link");return L(),te(D,{to:{name:z(Ae).GAME_RESULT,params:{id:f.game._id}},class:ke(["game-card text-left",{"game-card_win":n.value.isWin}])},{default:q(()=>[M("div",$a,[l(ra,{width:"50px",wave:f.game.endingWave,class:"game-card__main-icon"},null,8,["wave"]),M("div",null,[M("div",{class:ke({"text-green":n.value.isWin,"text-red":!n.value.isWin})},Y(n.value.title),3),M("div",Ca,[ee(Y(f.game.queueType)+" ",1),M("div",{class:ke(["ml-1",{"text-green":t.value.eloChange>=0,"text-red":t.value.eloChange<0}])}," ("+Y(I.value)+") ",3)]),M("div",Ma,"wave "+Y(f.game.endingWave),1),M("div",xa,Y(z(S)),1)])]),M("div",Ia,[l(sa,{wave:f.game.endingWave,player:v.value},null,8,["wave","player"]),M("div",Pa,[l(we,{icon:"Worker After 10",class:"game-card__icon"}),ee(" "+Y(t.value.workersPerWave[9]),1)]),M("div",Da,[l(we,{icon:"Alpha Top 10",class:"game-card__icon"}),ee(" "+Y(u.value),1)])]),M("div",Aa,[M("div",Ta,[ee(" Opening: "),(L(!0),J(Q,null,ge(t.value.buildPerWave[0],(b,A)=>(L(),te(ia,{key:A,unit:b,units:z(la),"has-champion":!1,class:"game-card__icon ml-1"},null,8,["unit","units"]))),128))]),M("div",Va,[ee(" Legion: "),l(tt,{width:"15px","is-megamind":t.value.megamind,mastermind:t.value.legion},null,8,["is-megamind","mastermind"])]),M("div",Wa,[ee(" Spell: "),l(we,{class:"game-card__icon",icon:t.value.chosenSpell},null,8,["icon"])])]),M("div",Oa,[M("div",Na,[(L(!0),J(Q,null,ge(z(c),b=>(L(),J("div",{class:"game-player game-card__text",key:b.playerName},[M("img",{src:z(ze)(g.value?b.classicElo:b.overallElo,f.game.queueType),class:"game-card__icon"},null,8,La),ee(" "+Y(b.playerName),1)]))),128))]),M("div",Ea,[(L(!0),J(Q,null,ge(z(o),b=>(L(),J("div",{class:"game-player game-card__text",key:b.playerName},[M("img",{src:z(ze)(g.value?b.classicElo:b.overallElo,f.game.queueType),class:"game-card__icon"},null,8,Ra),ee(" "+Y(b.playerName),1)]))),128))])])]),_:1},8,["to","class"])}}}),Ba=Fe(za,[["__scopeId","data-v-b1c66a64"]]);function Le(e){return ht()?(yt(e),!0):!1}function ue(e){return typeof e=="function"?e():z(e)}const it=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ja=e=>e!=null,Ha=Object.prototype.toString,Ua=e=>Ha.call(e)==="[object Object]",he=()=>{},Be=Ya();function Ya(){var e,a;return it&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((a=window==null?void 0:window.navigator)==null?void 0:a.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const Fa={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function Ga(...e){if(e.length!==1)return Ge(...e);const a=e[0];return typeof a=="function"?vt(gt(()=>({get:a,set:he}))):ce(a)}function be(e){var a;const t=ue(e);return(a=t==null?void 0:t.$el)!=null?a:t}const lt=it?window:void 0;function qa(...e){let a,t,n,S;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,n,S]=e,a=lt):[a,t,n,S]=e,!a)return he;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const v=[],y=()=>{v.forEach(o=>o()),v.length=0},u=(o,g,I,f)=>(o.addEventListener(g,I,f),()=>o.removeEventListener(g,I,f)),k=re(()=>[be(a),ue(S)],([o,g])=>{if(y(),!o)return;const I=Ua(g)?{...g}:g;v.push(...t.flatMap(f=>n.map(w=>u(o,f,w,I))))},{immediate:!0,flush:"post"}),c=()=>{k(),y()};return Le(c),c}function Ja(){const e=ce(!1),a=pt();return a&&_t(()=>{e.value=!0},a),e}function Za(e){const a=Ja();return W(()=>(a.value,!!e()))}function je(e,a,t={}){const{root:n,rootMargin:S="0px",threshold:v=.1,window:y=lt,immediate:u=!0}=t,k=Za(()=>y&&"IntersectionObserver"in y),c=W(()=>{const w=ue(e);return(Array.isArray(w)?w:[w]).map(be).filter(ja)});let o=he;const g=ce(u),I=k.value?re(()=>[c.value,be(n),g.value],([w,D])=>{if(o(),!g.value||!w.length)return;const b=new IntersectionObserver(a,{root:be(D),rootMargin:S,threshold:v});w.forEach(A=>A&&b.observe(A)),o=()=>{b.disconnect(),o=he}},{immediate:u,flush:"post"}):he,f=()=>{o(),I(),g.value=!1};return Le(f),{isSupported:k,isActive:g,pause(){o(),g.value=!1},resume(){g.value=!0},stop:f}}function De(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const Qa={[Fa.mounted](e,a){typeof a.value=="function"?je(e,a.value):je(e,...a.value)}};function ot(e){const a=window.getComputedStyle(e);if(a.overflowX==="scroll"||a.overflowY==="scroll"||a.overflowX==="auto"&&e.clientWidth<e.scrollWidth||a.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:ot(t)}}function Xa(e){const a=e||window.event,t=a.target;return ot(t)?!1:a.touches.length>1?!0:(a.preventDefault&&a.preventDefault(),!1)}const Se=new WeakMap;function Ka(e,a=!1){const t=ce(a);let n=null;re(Ga(e),y=>{const u=De(ue(y));if(u){const k=u;Se.get(k)||Se.set(k,k.style.overflow),t.value&&(k.style.overflow="hidden")}},{immediate:!0});const S=()=>{const y=De(ue(e));!y||t.value||(Be&&(n=qa(y,"touchmove",u=>{Xa(u)},{passive:!1})),y.style.overflow="hidden",t.value=!0)},v=()=>{var y;const u=De(ue(e));!u||!t.value||(Be&&(n==null||n()),u.style.overflow=(y=Se.get(u))!=null?y:"",Se.delete(u),t.value=!1)};return Le(v),W({get(){return t.value},set(y){y?S():v()}})}function en(){let e=!1;const a=ce(!1);return(t,n)=>{if(a.value=n.value,e)return;e=!0;const S=Ka(t,n.value);re(a,v=>S.value=v)}}en();function tn(){const e=St();function a(t){if(t.length<40)return e.push({name:Ae.PLAYER_HISTORY,query:{name:t}});e.push({name:Ae.GAME_RESULT,params:{id:t}})}return{search:a}}const an=se()({name:"VCardActions",props:ie(),setup(e,a){let{slots:t}=a;return kt({VBtn:{slim:!0,variant:"text"}}),le(()=>{var n;return l("div",{class:["v-card-actions",e.class],style:e.style},[(n=t.default)==null?void 0:n.call(t)])}),{}}}),nn=de({opacity:[Number,String],...ie(),...xe()},"VCardSubtitle"),rn=se()({name:"VCardSubtitle",props:nn(),setup(e,a){let{slots:t}=a;return le(()=>l(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},t)),{}}}),sn=Jt("v-card-title"),ln=de({alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...wt(),...ie(),...We(),...bt()},"VImg"),ut=se()({name:"VImg",directives:{intersect:$t},props:ln(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,a){let{emit:t,slots:n}=a;const{backgroundColorClasses:S,backgroundColorStyles:v}=Ct(Ge(e,"color")),{roundedClasses:y}=Oe(e),u=Mt("VImg"),k=ve(""),c=ce(),o=ve(e.eager?"loading":"idle"),g=ve(),I=ve(),f=W(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),w=W(()=>f.value.aspect||g.value/I.value||0);re(()=>e.src,()=>{D(o.value!=="idle")}),re(w,($,T)=>{!$&&T&&c.value&&B(c.value)}),xt(()=>D());function D($){if(!(e.eager&&$)&&!(It&&!$&&!e.eager)){if(o.value="loading",f.value.lazySrc){const T=new Image;T.src=f.value.lazySrc,B(T,null)}f.value.src&&Pt(()=>{var T;t("loadstart",((T=c.value)==null?void 0:T.currentSrc)||f.value.src),setTimeout(()=>{var d;if(!u.isUnmounted)if((d=c.value)!=null&&d.complete){if(c.value.naturalWidth||A(),o.value==="error")return;w.value||B(c.value,null),o.value==="loading"&&b()}else w.value||B(c.value),O()})})}}function b(){var $;u.isUnmounted||(O(),B(c.value),o.value="loaded",t("load",(($=c.value)==null?void 0:$.currentSrc)||f.value.src))}function A(){var $;u.isUnmounted||(o.value="error",t("error",(($=c.value)==null?void 0:$.currentSrc)||f.value.src))}function O(){const $=c.value;$&&(k.value=$.currentSrc||$.src)}let H=-1;Dt(()=>{clearTimeout(H)});function B($){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const d=()=>{if(clearTimeout(H),u.isUnmounted)return;const{naturalHeight:s,naturalWidth:r}=$;s||r?(g.value=r,I.value=s):!$.complete&&o.value==="loading"&&T!=null?H=window.setTimeout(d,T):($.currentSrc.endsWith(".svg")||$.currentSrc.startsWith("data:image/svg+xml"))&&(g.value=1,I.value=1)};d()}const N=W(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),E=()=>{var d;if(!f.value.src||o.value==="idle")return null;const $=l("img",{class:["v-img__img",N.value],style:{objectPosition:e.position},src:f.value.src,srcset:f.value.srcset,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:c,onLoad:b,onError:A},null),T=(d=n.sources)==null?void 0:d.call(n);return l(pe,{transition:e.transition,appear:!0},{default:()=>[Ce(T?l("picture",{class:"v-img__picture"},[T,$]):$,[[Vt,o.value==="loaded"]])]})},Z=()=>l(pe,{transition:e.transition},{default:()=>[f.value.lazySrc&&o.value!=="loaded"&&l("img",{class:["v-img__img","v-img__img--preload",N.value],style:{objectPosition:e.position},src:f.value.lazySrc,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),G=()=>n.placeholder?l(pe,{transition:e.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!n.error)&&l("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,X=()=>n.error?l(pe,{transition:e.transition,appear:!0},{default:()=>[o.value==="error"&&l("div",{class:"v-img__error"},[n.error()])]}):null,P=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,C=ve(!1);{const $=re(w,T=>{T&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{C.value=!0})}),$())})}return le(()=>{const $=$e.filterProps(e);return Ce(l($e,At({class:["v-img",{"v-img--booting":!C.value},S.value,y.value,e.class],style:[{width:Tt(e.width==="auto"?g.value:e.width)},v.value,e.style]},$,{aspectRatio:w.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(Q,null,[l(E,null,null),l(Z,null,null),l(P,null,null),l(G,null,null),l(X,null,null)]),default:n.default}),[[qe("intersect"),{handler:D,options:e.options},null,{once:!0}]])}),{currentSrc:k,image:c,state:o,naturalWidth:g,naturalHeight:I}}}),on=de({start:Boolean,end:Boolean,icon:ye,image:String,text:String,...ie(),...Ne(),...We(),...Wt(),...xe(),...Je(),...Xe({variant:"flat"})},"VAvatar"),He=se()({name:"VAvatar",props:on(),setup(e,a){let{slots:t}=a;const{themeClasses:n}=Ze(e),{colorClasses:S,colorStyles:v,variantClasses:y}=Ke(e),{densityClasses:u}=Qe(e),{roundedClasses:k}=Oe(e),{sizeClasses:c,sizeStyles:o}=Ot(e);return le(()=>l(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},n.value,S.value,u.value,k.value,c.value,y.value,e.class],style:[v.value,o.value,e.style]},{default:()=>[t.default?l(Me,{key:"content-defaults",defaults:{VImg:{cover:!0,image:e.image},VIcon:{icon:e.icon}}},{default:()=>[t.default()]}):e.image?l(ut,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?l(Te,{key:"icon",icon:e.icon},null):e.text,et(!1,"v-avatar")]})),{}}}),un=de({appendAvatar:String,appendIcon:ye,prependAvatar:String,prependIcon:ye,subtitle:[String,Number],title:[String,Number],...ie(),...Ne()},"VCardItem"),cn=se()({name:"VCardItem",props:un(),setup(e,a){let{slots:t}=a;return le(()=>{var c;const n=!!(e.prependAvatar||e.prependIcon),S=!!(n||t.prepend),v=!!(e.appendAvatar||e.appendIcon),y=!!(v||t.append),u=!!(e.title!=null||t.title),k=!!(e.subtitle!=null||t.subtitle);return l("div",{class:["v-card-item",e.class],style:e.style},[S&&l("div",{key:"prepend",class:"v-card-item__prepend"},[t.prepend?l(Me,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},t.prepend):l(Q,null,[e.prependAvatar&&l(He,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(Te,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[u&&l(sn,{key:"title"},{default:()=>{var o;return[((o=t.title)==null?void 0:o.call(t))??e.title]}}),k&&l(rn,{key:"subtitle"},{default:()=>{var o;return[((o=t.subtitle)==null?void 0:o.call(t))??e.subtitle]}}),(c=t.default)==null?void 0:c.call(t)]),y&&l("div",{key:"append",class:"v-card-item__append"},[t.append?l(Me,{key:"append-defaults",disabled:!v,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},t.append):l(Q,null,[e.appendIcon&&l(Te,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(He,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),dn=de({opacity:[Number,String],...ie(),...xe()},"VCardText"),mn=se()({name:"VCardText",props:dn(),setup(e,a){let{slots:t}=a;return le(()=>l(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},t)),{}}}),fn=de({appendAvatar:String,appendIcon:ye,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ye,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...Zt(),...ie(),...Ne(),...Nt(),...Qt(),...Lt(),...Et(),...Xt(),...We(),...ma(),...xe(),...Je(),...Xe({variant:"elevated"})},"VCard"),vn=se()({name:"VCard",directives:{Ripple:Kt},props:fn(),setup(e,a){let{attrs:t,slots:n}=a;const{themeClasses:S}=Ze(e),{borderClasses:v}=ea(e),{colorClasses:y,colorStyles:u,variantClasses:k}=Ke(e),{densityClasses:c}=Qe(e),{dimensionStyles:o}=Rt(e),{elevationClasses:g}=ta(e),{loaderClasses:I}=zt(e),{locationStyles:f}=Bt(e),{positionClasses:w}=aa(e),{roundedClasses:D}=Oe(e),b=fa(e,t),A=W(()=>e.link!==!1&&b.isLink.value),O=W(()=>!e.disabled&&e.link!==!1&&(e.link||b.isClickable.value));return le(()=>{const H=A.value?"a":e.tag,B=!!(n.title||e.title!=null),N=!!(n.subtitle||e.subtitle!=null),E=B||N,Z=!!(n.append||e.appendAvatar||e.appendIcon),G=!!(n.prepend||e.prependAvatar||e.prependIcon),X=!!(n.image||e.image),P=E||G||Z,C=!!(n.text||e.text!=null);return Ce(l(H,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":O.value},S.value,v.value,y.value,c.value,g.value,I.value,w.value,D.value,k.value,e.class],style:[u.value,o.value,f.value,e.style],href:b.href.value,onClick:O.value&&b.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var $;return[X&&l("div",{key:"image",class:"v-card__image"},[n.image?l(Me,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(ut,{key:"image-img",cover:!0,src:e.image},null)]),l(jt,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:n.loader}),P&&l(cn,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),C&&l(mn,{key:"text"},{default:()=>{var T;return[((T=n.text)==null?void 0:T.call(n))??e.text]}}),($=n.default)==null?void 0:$.call(n),n.actions&&l(an,null,{default:n.actions}),et(O.value,"v-card")]}}),[[qe("ripple"),O.value&&e.ripple]])}),{}}}),gn=e=>(Ht("data-v-e9e38205"),e=e(),Ut(),e),hn=gn(()=>M("div",null,"wave 1",-1)),yn={class:"stat-item"},_n={class:"d-flex justify-center text-center mt-2"},pn={class:"font-weight-bold"},Sn=Ve({__name:"PlayerStats",props:{games:{},playerName:{}},setup(e){const a=e,t=W(()=>a.games.reduce((v,y)=>{const u=y.playersData.find(c=>c.playerName.toLowerCase()===a.playerName.toLowerCase());return u&&u.mercenariesSentPerWave[0].flat().includes("Snail")?v+1:v},0)),n=W(()=>t.value/a.games.length*100),S=W(()=>{const v={Megamind:0};return a.games.map(u=>u.playersData.find(k=>k.playerName.toLowerCase()===a.playerName.toLowerCase())).forEach(u=>{if(u.megamind){v.Megamind++;return}u.legion in v?v[u.legion]++:v[u.legion]=1}),Object.entries(v).sort((u,k)=>k[1]-u[1]).slice(0,3)});return(v,y)=>(L(),te(vn,{class:"card"},{default:q(()=>[hn,M("div",null,"For "+Y(v.games.length)+" games",1),M("div",yn,[M("div",null,[l(we,{icon:"snail"}),M("span",{class:ke({"text-orange":n.value>1,"text-red":n.value>50})},Y(n.value.toFixed(0))+"% ("+Y(t.value)+"/"+Y(v.games.length)+")",3)]),M("div",_n,[(L(!0),J(Q,null,ge(S.value,(u,k)=>(L(),J("div",{key:k},[l(tt,{mastermind:u[0],width:"30px",class:"mr-1"},null,8,["mastermind"]),M("div",pn,Y(u[1]),1)]))),128))])])]),_:1}))}}),kn=Fe(Sn,[["__scopeId","data-v-e9e38205"]]),wn=M("h2",{class:"text-h5"},"Loading player...",-1),bn=M("span",{class:"text-h6 font-weight-bold title"},"Player not found",-1),$n={key:1,class:"container fill-height mt-5"},Cn={key:0,class:"intersection"},Vn=Ve({__name:"PlayerHistoryView",setup(e){const{api:a}=oa(),t=Ft(),n=W(()=>{var b;return(((b=t.query)==null?void 0:b.name)||"").toString()}),{search:S}=tn(),{history:v}=ha(a),y=v(n),{isLoading:u,data:k,error:c,isFetching:o,fetchNextPage:g,hasNextPage:I}=y;function f(b){const A=b.target.value;S(A)}const w=W(()=>{var A;return{games:(A=k.value)==null?void 0:A.pages.reduce((O,H)=>(H.games.forEach(B=>{O=O.concat(B)}),O),[]),count:0}});function D([{isIntersecting:b}]){b&&g.value()}return(b,A)=>z(u)||z(c)?(L(),te(Yt,{key:0,class:"fill-height"},{default:q(()=>[l($e,{class:"text-center align-center items-center fill-height"},{default:q(()=>[z(u)?(L(),J(Q,{key:0},[l(Re,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"8"}),wn],64)):z(c)?(L(),te(na,{key:1,height:"100",type:"error",closable:!1},{default:q(()=>[bn]),_:1})):Ie("",!0)]),_:1})]),_:1})):(L(),J("div",$n,[z(k)?(L(),te($e,{key:0,class:"text-center fill-height"},{default:q(()=>[l(Ee,null,{default:q(()=>[l(Pe,{cols:"12",class:"align-center"},{default:q(()=>[l(Gt,{class:"mt-3",name:"search",color:"primary","append-inner-icon":"mdi-magnify",variant:"solo-filled",label:"Nickname or Game ID",modelValue:n.value,onChange:f},null,8,["modelValue"])]),_:1})]),_:1}),l(Ee,null,{default:q(()=>[l(Pe,{cols:"2"},{default:q(()=>[l(kn,{games:w.value.games,"player-name":n.value},null,8,["games","player-name"])]),_:1}),l(Pe,null,{default:q(()=>[(L(!0),J(Q,null,ge(w.value.games,(O,H)=>(L(),te(Ba,{playerName:n.value,game:O,key:H},null,8,["playerName","game"]))),128)),!z(u)&&!z(o)&&w.value.games.length&&z(I)?Ce((L(),J("div",Cn,null,512)),[[z(Qa),D]]):z(o)?(L(),te(Re,{key:1,color:"primary",indeterminate:"disable-shrink",size:"50",width:"8"})):Ie("",!0)]),_:1})]),_:1})]),_:1})):Ie("",!0)]))}});export{Vn as default};
